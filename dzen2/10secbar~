#!/bin/bash

UPDATE=10
TEXTCOL="#aaaaaa"
ICONCOL="#707070"
SEPCOL="#d2b9d3"
COUNT=0

sleep 3

while :;  do
	
    # Drive Space
	ROOTD=`df -h / | grep / | awk '{print $4}' | sed -e 's/G/GB/g'`
	ROOTD2=`df -h / | grep / | awk '{print $5}' | sed -e 's/%//g'`
    ROOTD2=$(($ROOTD2 / 3))
    INACR=$((33-$ROOTD2))
	HOMED=`df -h | grep /dev/sda4 | awk '{print $4}' | sed -e 's/G/GB/g'`
	HOMED2=`df -h | grep /dev/sda4 | awk '{print $5}' | sed -e 's/%//g'`
    HOMED2=$(($HOMED2 / 3))
    INAC=$((33-$HOMED2))
#	XSTOR=`df -h /dev/sdb1 | grep dev | awk '{print $4}' | sed -e 's/G/GB/g'`
#	XSTOR2=`df -h /dev/sdb1 | grep dev | awk '{print $5}' | sed -e 's/%//g'`
#    XSTOR2=$(($XSTOR2 / 3))
 #   INACX=$((33-$XSTOR2))
#	if [ "$XSTOR" == "" ]; then XSTOR="N/A"; fi	

	#Battery
	STATE=$(acpi | awk '{print $3}')
	TIME=$(acpi | awk '{print $4}' | sed 's/,//')
	if [ "$STATE"  == "Discharging," ]; 
	then BATTICON="^i(/home/cas/.xmonad/dzen2/icons/power-bat2.xbm)";
	else BATTICON="^i(/home/cas/.xmonad/dzen2/icons/power-ac.xbm)";
	fi

	# Date
	DATE=$(date +"%a %b %d %H:%M")

	
	# CPU Temp
	CPU=`sensors | grep "Core 1" | awk '{print $3}' | sed -e 's/+//g' | sed -e 's/\..*//'`
	
	if [ "$CPU" -lt 60 ]; then CPU="^fg($TEXTCOL)$CPU"C"^fg()";
		elif [[ "$CPU" -gt 49 && "$CPU" -lt 85 ]]; then CPU="^fg(#cc6600)$CPU"C"^fg()";
		else CPU="^fg(red)$CPU"C"^fg()";
	fi
	CPUICON="^i(/home/cas/.xmonad/dzen2/icons/temp.xbm)"

	
	
#    echo "^fg($ICONCOL)home:^fg()^fg($TEXTCOL)$HOMED^fg()^fg(#cc6600)^r("$HOMED2"x5)^fg(#000)^r("$INAC"x5)^fg($TEXTCOL)$HOMED2  ^fg($ICONCOL)xstor:^fg()^fg($TEXTCOL)$XSTOR^fg()  |  ^fg($ICONCOL)$MEMICON^fg()^fg($TEXTCOL)$MEM"MB"^fg()  ^fg($ICONCOL)$CPUICON^fg()$CPU  ^fg($ICONCOL)$LOADICON^fg()^fg($TEXTCOL)$LOAD^fg()  ^fg($ICONCOL)$BATTICON^fg()^fg($TEXTCOL)$TIME^fg()  |  ^fg($TEXTCOL)$DATE^fg()  "

echo -n " ^fg($ICONCOL)root:^fg()^fg(#339933)^fg($TEXTCOL) $ROOTD^fg()    ^fg($ICONCOL)home:^fg()^fg(#339933)^fg($TEXTCOL) $HOMED^fg()    ^fg($ICONCOL)xstor:^fg()^fg(#339933)^fg($TEXTCOL) $XSTOR^fg()   ::"
echo -n "  ^fg($ICONCOL)Cpu: ^fg()$CPU  ^fg($SEPCOL)::^fg()"
echo -n "  ^fg($ICONCOL)$BATTICON^fg()^fg($TEXTCOL)$TIME^fg()  ^fg($SEPCOL)::^fg()"
echo "  ^fg($TEXTCOL)$DATE^fg()  "
	sleep $UPDATE
done | dzen2 -x 640 -y 0 -h 16 -w 1040 -ta r -fg $SEPCOL -bg "#303030" -fn "-*-dejavu sans mono-medium-r-*-*-9-*-*-*-*-*-*-*"
